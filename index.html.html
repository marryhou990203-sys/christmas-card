<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Christmas Card Deluxe</title>

<style>
/* ================= åŸºç¡€è®¾ç½® ================= */
* { 
  box-sizing: border-box; 
  -webkit-tap-highlight-color: transparent; /* ç§»é™¤ç§»åŠ¨ç«¯ç‚¹å‡»é«˜äº® */
  touch-action: manipulation; /* ç¦ç”¨åŒå‡»ç¼©æ”¾ï¼ŒåŠ å¿«ç‚¹å‡»å“åº” */
}

body {
  margin: 0;
  background: #0b4f3a; 
  font-family: "Georgia", "Times New Roman", serif;
  overflow: hidden;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  perspective: 1500px;
}

/* ================= ä¸‹é›ªç”»å¸ƒ ================= */
#snowCanvas {
  position: fixed; top: 0; left: 0; width: 100%; height: 100%;
  z-index: 1; pointer-events: none;
}

/* ================= å¡ç‰‡æ•´ä½“å®¹å™¨ ================= */
.card-wrapper {
  width: 320px; height: 480px; position: relative;
  transform-style: preserve-3d;
  transition: transform 1s cubic-bezier(0.645, 0.045, 0.355, 1);
  z-index: 10;
}
.card-wrapper.show-back { transform: rotateY(180deg) translateX(-160px); }
@media (max-width: 600px) { 
  .card-wrapper.show-back { 
    transform: rotateY(180deg) translateX(0); /* ä¿®å¤ç§»åŠ¨ç«¯å¡ç‰‡åç§» */
    transform-origin: center center; /* ç¡®ä¿æ—‹è½¬ä¸­å¿ƒåœ¨ä¸­é—´ */
  } 
}

/* ================= é€šç”¨å°é¢/å°åº•æ ·å¼ ================= */
.cover-face {
  position: absolute; top: 0; left: 0; width: 100%; height: 100%;
  border-radius: 12px; overflow: hidden;
  backface-visibility: hidden; -webkit-backface-visibility: hidden;
  box-shadow: 5px 10px 15px rgba(0,0,0,0.2);
  cursor: pointer; /* ç§»åŠ¨ç«¯æ˜¾ç¤ºç‚¹å‡»æŒ‡é’ˆ */
}

/* ================= å°é¢ (Front) ================= */
.front {
  background: #0f6b4f;
  transform-origin: left center;
  transition: transform 1.2s cubic-bezier(0.645, 0.045, 0.355, 1);
  z-index: 20;
  display: flex; flex-direction: column;
  justify-content: center; align-items: center; padding-bottom: 20px;
}
.card-wrapper.open .front { transform: rotateY(-140deg); }

/* å°é¢æ ‡é¢˜ */
.cover-title {
  font-family: 'Brush Script MT', 'Cursive', serif;
  font-size: 42px; margin: 0; margin-top: 20px; text-align: center;
  background: linear-gradient(45deg, #ffd700, #ffec8b, #ffd700, #ffbf00);
  background-size: 200% auto; -webkit-background-clip: text; background-clip: text;
  color: transparent; filter: drop-shadow(0 2px 2px rgba(0,0,0,0.3));
  animation: shine 3s linear infinite;
}
.cover-subtitle { font-family: 'Courier New', monospace; font-size: 14px; color: rgba(255,255,255,0.7); margin-top: 5px; margin-bottom: 30px; letter-spacing: 2px; text-transform: uppercase; }
@keyframes shine { to { background-position: 200% center; } }

/* å°é¢æ ‘ */
.tree { position: relative; transform: scale(0.85); margin-bottom: 20px;}
.layer { position: absolute; left: 50%; background: #f0f0f0; box-shadow: 0 4px 6px rgba(0,0,0,0.1); transform: translateX(-50%); }
.l1 { width: 90px; height: 34px; top: 90px; border-radius: 30px 20px 28px 18px; }
.l2 { width:130px; height: 38px; top:140px; border-radius: 32px 22px 26px 20px; }
.l3 { width:170px; height: 42px; top:200px; border-radius: 36px 26px 30px 22px; }
.l4 { width:210px; height: 48px; top:270px; border-radius: 40px 30px 34px 26px; }
.trunk { width: 30px; height: 70px; background: #8b4a2f; position: absolute; top: 310px; left: 50%; transform: translateX(-50%); }
.star { width: 42px; height: 42px; background: #ffd93d; clip-path: polygon(50% 0%,61% 35%,98% 35%,68% 57%,79% 91%,50% 70%,21% 91%,32% 57%,2% 35%,39% 35%); position: absolute; top: 40px; left: 50%; transform: translateX(-50%); animation: glow 2s infinite ease-in-out; }
.click-hint { position: absolute; bottom: 15px; color: rgba(255,255,255,0.4); font-size: 12px; animation: pulse 2s infinite; }

/* ================= å†…é¡µ (Inside) - å‡çº§ç‰ˆ ================= */
.inside {
  background: #fdfdfd; /* çº¸å¼ ç™½ */
  z-index: 10;
  box-shadow: inset 10px 0 20px rgba(0,0,0,0.05);
  display: flex; justify-content: center; align-items: center;
  position: relative; /* ä¸ºè£…é¥°å…ƒç´ å®šä½ */
}

/* æ–°å¢ï¼šå†…é¡µè£…é¥°å…ƒç´  */
.decoration {
  position: absolute;
  pointer-events: none; /* ä¸å½±å“ç‚¹å‡»ç…§ç‰‡ */
}

/* è§’è½çš„å†¬é’å¶å’Œæµ†æœ */
.holly-corner {
  top: 10px; right: 10px; width: 60px; height: 60px;
  background-image: 
    /* çº¢æµ†æœ */
    radial-gradient(circle at 45px 15px, #c1121f 4px, transparent 5px),
    radial-gradient(circle at 35px 25px, #c1121f 4px, transparent 5px),
    radial-gradient(circle at 50px 30px, #c1121f 4px, transparent 5px),
    /* ç»¿å¶å­ (ç®€å•æ¨¡æ‹Ÿ) */
    linear-gradient(135deg, transparent 20px, #2d6a4f 20px, #2d6a4f 40px, transparent 40px),
    linear-gradient(45deg, transparent 20px, #40916c 20px, #40916c 40px, transparent 40px);
  background-size: 60px 60px;
  opacity: 0.8;
}

/* æ•£å¸ƒçš„é‡‘è‰²å’Œçº¢è‰²å°ç‚¹ */
.dots-pattern {
  inset: 20px; /* ç¦»è¾¹ç¼˜ä¸€ç‚¹è·ç¦» */
  background-image: 
    radial-gradient(#c1121f 2px, transparent 2px), /* çº¢ç‚¹ */
    radial-gradient(#ffd700 1.5px, transparent 1.5px); /* é‡‘ç‚¹ */
  background-size: 40px 40px, 30px 30px; /* é”™å¼€åˆ†å¸ƒ */
  background-position: 0 0, 15px 15px;
  opacity: 0.3; /* åŠé€æ˜ï¼Œä¸æŠ¢ç…§ç‰‡é£å¤´ */
}

/* åº•éƒ¨çº¢è‰²ä¸å¸¦æ¡çº¹ */
.ribbon-strip {
  bottom: 0; left: 0; width: 100%; height: 8px;
  background: repeating-linear-gradient(45deg, #c1121f, #c1121f 10px, #fdfdfd 10px, #fdfdfd 15px);
}


/* ç…§ç‰‡å †å  */
.photo-stack { position: relative; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; z-index: 5; }
.photo-item { position: absolute; opacity: 0; transition: all 0.6s ease; transform: scale(0.9); pointer-events: none; }
.photo-item.active { opacity: 1; transform: scale(1); pointer-events: auto; }
.polaroid { width: 240px; height: 320px; background: white; padding: 10px 10px 45px 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.15); transform: rotate(-2deg); border: 1px solid #eee; }
.polaroid img { width: 100%; height: 100%; object-fit: cover; filter: brightness(1.05); }
.p-caption { position: absolute; bottom: 15px; width: 100%; text-align: center; left: 0; font-family: 'Courier New', monospace; color: #555; font-size: 14px; }

/* ================= å°åº• (Back) - è§†é¢‘ ================= */
.back { background: #000; transform: rotateY(180deg); z-index: 5; display: flex; justify-content: center; align-items: center; }
.card-video { width: 100%; height: 100%; object-fit: cover; border-radius: 12px; }

/* éŸ³ä¹æŒ‰é’® */
.music-btn { position: fixed; top: 20px; right: 20px; z-index: 100; background: rgba(255,255,255,0.2); width: 44px; height: 44px; border-radius: 50%; border: 1px solid rgba(255,255,255,0.4); color: white; font-size: 20px; cursor: pointer; backdrop-filter: blur(4px); display: flex; justify-content: center; align-items: center; }
</style>
</head>
<body>

<canvas id="snowCanvas"></canvas>
<button class="music-btn" onclick="toggleMusic(event)">ğŸµ</button>
<!-- æ›¿æ¢éŸ³é¢‘é“¾æ¥ -->
<audio id="bgm" loop preload="metadata">
  <source src="https://raw.githubusercontent.com/marryhou990203-sys/christmas-card/refs/heads/main/Santa_tell_me.mp3" type="audio/mpeg">
</audio>

<div class="card-wrapper" id="card">
  
  <div class="cover-face front" onclick="openCard()">
    <h1 class="cover-title">Merry Christmas</h1>
    <p class="cover-subtitle">Wishes for You</p>
    <div class="tree"><div class="star"></div><div class="layer l1"></div><div class="layer l2"></div><div class="layer l3"></div><div class="layer l4"></div><div class="trunk"></div></div>
    <div class="click-hint">Tap to Open</div>
  </div>

  <div class="cover-face inside" onclick="nextPhoto()">
    <div class="decoration dots-pattern"></div>
    <div class="decoration holly-corner"></div>
    <div class="decoration ribbon-strip"></div>
    
    <div class="photo-stack">
      <div class="photo-item active">
        <div class="polaroid" style="transform: rotate(-3deg);">
          <img src="https://i.postimg.cc/LsCw470c/Weixin_Image_20251224151140_3914_153.jpg" alt="Photo 1">
          <div class="p-caption">Warm Winter</div>
        </div>
      </div>
      <div class="photo-item">
        <div class="polaroid" style="transform: rotate(2deg);">
          <img src="https://i.postimg.cc/yNQt65bC/Weixin_Image_20251224110151_3863_153.jpg" alt="Photo 2">
          <div class="p-caption">December Mood</div>
        </div>
      </div>
      <div class="photo-item">
        <div class="polaroid" style="transform: rotate(-1deg);">
          <img src="https://i.postimg.cc/fbT1NZBD/Weixin_Image_20251217140433_3179_153.jpg" alt="Photo 3">
          <div class="p-caption">Best Wishes</div>
        </div>
      </div>
    </div>
  </div>

  <div class="cover-face back" onclick="resetCard()">
    <!-- æ›¿æ¢è§†é¢‘é“¾æ¥ + å¢å¼ºç§»åŠ¨ç«¯å…¼å®¹ -->
    <video class="card-video" id="endVideo" loop muted playsinline webkit-playsinline x5-playsinline>
      <source src="https://raw.githubusercontent.com/marryhou990203-sys/christmas-card/refs/heads/main/christmas%20gif.mp4" type="video/mp4">
      Your browser does not support the video tag.
    </video>
  </div>

</div>

<script>
  // ä¸‹é›ªåŠ¨ç”»
  const canvas = document.getElementById('snowCanvas'); const ctx = canvas.getContext('2d');
  canvas.width = window.innerWidth; canvas.height = window.innerHeight;
  const flakes = []; const particleCount = 100;
  window.addEventListener('resize', () => { canvas.width = window.innerWidth; canvas.height = window.innerHeight; });
  class Flake {
      constructor(){ this.reset(); }
      reset(){ this.x = Math.random() * canvas.width; this.y = Math.random() * canvas.height - canvas.height; this.size = Math.random() * 3 + 1; this.speed = Math.random() * 1 + 0.5; this.opacity = Math.random() * 0.5 + 0.3; this.swing = Math.random() * 0.2 - 0.1; }
      update(){ this.y += this.speed; this.x += this.swing; if(this.y > canvas.height){ this.reset(); this.y = -10; } }
      draw(){ ctx.fillStyle = `rgba(255, 255, 255, ${this.opacity})`; ctx.beginPath(); ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2); ctx.fill(); }
  }
  for(let i=0; i<particleCount; i++){ const f = new Flake(); f.y = Math.random() * canvas.height; flakes.push(f); }
  function animate(){ ctx.clearRect(0, 0, canvas.width, canvas.height); flakes.forEach(f => { f.update(); f.draw(); }); requestAnimationFrame(animate); }
  animate();

  // å¡ç‰‡äº¤äº’
  let photoIndex = 0; const photos = document.querySelectorAll('.photo-item'); const card = document.getElementById('card'); const videoPlayer = document.getElementById('endVideo'); let isCardOpen = false;
  function openCard() { if (isCardOpen) return; card.classList.add('open'); isCardOpen = true; const bgm = document.getElementById('bgm'); const btn = document.querySelector('.music-btn'); if(bgm.paused) { bgm.play().then(() => { btn.textContent = 'â¸'; }).catch(e => console.log("ç­‰å¾…ç”¨æˆ·äº¤äº’")); } }
  function nextPhoto() { if (!isCardOpen) return; if (photoIndex < photos.length - 1) { photos[photoIndex].classList.remove('active'); photoIndex++; photos[photoIndex].classList.add('active'); } else { card.classList.add('show-back'); if (videoPlayer) { videoPlayer.currentTime = 0; videoPlayer.play(); } } }
  function resetCard() { card.classList.remove('show-back'); if (videoPlayer) { videoPlayer.pause(); } setTimeout(() => { card.classList.remove('open'); isCardOpen = false; setTimeout(() => { photos.forEach(p => p.classList.remove('active')); photos[0].classList.add('active'); photoIndex = 0; }, 500); }, 600); }
  function toggleMusic(e) { e.stopPropagation(); const m = document.getElementById('bgm'); const btn = document.querySelector('.music-btn'); if (m.paused) { m.play(); btn.textContent = 'â¸'; } else { m.pause(); btn.textContent = 'ğŸµ'; } }
</script>
</body>
</html>
